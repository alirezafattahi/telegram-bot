# ربات تلگرام پیشرفته - Advanced Telegram Bot

یک ربات تلگرام کامل و پیشرفته با قابلیت‌های جامع برای مدیریت کاربران، فایل‌ها، عکس‌ها و نظرسنجی‌ها.

## ویژگی‌های ربات

### 👤 مدیریت کاربران
- ثبت‌نام خودکار کاربران
- مدیریت پروفایل کاربری
- ذخیره اطلاعات تماس (ایمیل، شماره تلفن)
- آمار کاربران فعال

### 📁 مدیریت فایل‌ها
- آپلود انواع فایل (اسناد، تصاویر، صوتی، ویدیو)
- دانلود فایل‌های آپلود شده
- مشاهده لیست فایل‌های کاربر
- ذخیره اطلاعات فایل در دیتابیس

### 📸 مدیریت عکس‌ها
- آپلود عکس
- ارسال عکس‌های ذخیره شده
- گالری عکس‌های کاربر

### 📊 سیستم نظرسنجی
- ایجاد نظرسنجی‌های چندگزینه‌ای
- ذخیره پاسخ‌های کاربران
- آمار نظرسنجی‌ها

### 🗄️ دیتابیس و آمار
- دیتابیس SQLite برای ذخیره اطلاعات
- آمار کامل سیستم
- مشاهده اطلاعات کاربران
- گزارش‌گیری

## نصب و راه‌اندازی

### پیش‌نیازها
- Python 3.8 یا بالاتر
- حساب تلگرام و ربات تلگرام

### مراحل نصب

1. **کلون کردن پروژه:**
```bash
git clone <repository-url>
cd telegram-bot
```

2. **نصب وابستگی‌ها:**
```bash
pip install -r requirements.txt
```

3. **ایجاد ربات تلگرام:**
   - به [@BotFather](https://t.me/BotFather) در تلگرام پیام دهید
   - دستور `/newbot` را ارسال کنید
   - نام و نام کاربری ربات را انتخاب کنید
   - توکن ربات را کپی کنید

4. **تنظیم متغیر محیطی:**
```bash
export TELEGRAM_BOT_TOKEN='8380664568:AAHl1HJsaWN0Gb7nHUJMPqxH4Y4uOjnDbLA'
```

5. **اجرای ربات:**
```bash
python telegram_bot.py
```

## دستورات ربات

### دستورات اصلی
- `/start` - شروع ربات و نمایش منوی اصلی
- `/help` - نمایش راهنمای کامل

### مدیریت پروفایل
- `/profile` - مشاهده پروفایل کاربری
- `/update_profile` - به‌روزرسانی اطلاعات پروفایل

### مدیریت فایل‌ها
- `/upload` - راهنمای آپلود فایل
- `/download` - دانلود فایل‌های آپلود شده
- `/my_files` - مشاهده فایل‌های کاربر

### عکس‌ها
- `/send_photo` - ارسال عکس از گالری

### نظرسنجی
- `/create_poll` - ایجاد نظرسنجی جدید

### دیتابیس و آمار
- `/view_database` - مشاهده آمار دیتابیس
- `/admin_stats` - آمار مدیریتی

## ساختار دیتابیس

### جدول users
- `user_id` - شناسه کاربر
- `username` - نام کاربری
- `first_name` - نام
- `last_name` - نام خانوادگی
- `phone_number` - شماره تلفن
- `email` - ایمیل
- `registration_date` - تاریخ عضویت
- `is_active` - وضعیت فعال بودن

### جدول files
- `file_id` - شناسه فایل
- `user_id` - شناسه کاربر
- `file_name` - نام فایل
- `file_type` - نوع فایل
- `file_size` - حجم فایل
- `telegram_file_id` - شناسه فایل در تلگرام
- `upload_date` - تاریخ آپلود

### جدول polls
- `poll_id` - شناسه نظرسنجی
- `user_id` - شناسه کاربر
- `question` - سوال نظرسنجی
- `options` - گزینه‌ها
- `poll_type` - نوع نظرسنجی
- `creation_date` - تاریخ ایجاد
- `is_active` - وضعیت فعال بودن

### جدول poll_responses
- `response_id` - شناسه پاسخ
- `poll_id` - شناسه نظرسنجی
- `user_id` - شناسه کاربر
- `selected_option` - گزینه انتخاب شده
- `response_date` - تاریخ پاسخ

## ویژگی‌های فنی

- **زبان برنامه‌نویسی:** Python 3.8+
- **فریمورک:** python-telegram-bot
- **دیتابیس:** SQLite
- **ساختار:** شی‌گرا (OOP)
- **لاگ‌گیری:** کامل و جامع
- **مدیریت خطا:** پیشرفته

## امنیت

- استفاده از متغیرهای محیطی برای توکن
- اعتبارسنجی ورودی‌ها
- مدیریت امن فایل‌ها
- لاگ‌گیری تمام فعالیت‌ها

## توسعه و سفارشی‌سازی

### افزودن دستور جدید
```python
async def new_command(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    # کد دستور جدید
    pass

# در setup_handlers اضافه کنید:
self.application.add_handler(CommandHandler("new_command", self.new_command))
```

### افزودن جدول جدید
```python
cursor.execute('''
    CREATE TABLE IF NOT EXISTS new_table (
        id INTEGER PRIMARY KEY,
        data TEXT
    )
''')
```

## عیب‌یابی

### مشکلات رایج

1. **خطای توکن:**
   - بررسی صحت توکن ربات
   - اطمینان از تنظیم متغیر محیطی

2. **خطای دیتابیس:**
   - بررسی دسترسی‌های فایل
   - بررسی فضای دیسک

3. **خطای شبکه:**
   - بررسی اتصال اینترنت
   - بررسی فایروال

## مشارکت

برای مشارکت در پروژه:
1. Fork کنید
2. شاخه جدید ایجاد کنید
3. تغییرات را commit کنید
4. Pull Request ارسال کنید

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.

## پشتیبانی

برای پشتیبانی و گزارش باگ، لطفاً issue ایجاد کنید.

---

**نکته:** این ربات برای استفاده آموزشی و تجاری طراحی شده و قابلیت توسعه و سفارشی‌سازی دارد.
